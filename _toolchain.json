{"container":{"guid":"6f4d370f77a647e693d77ec638a44dc8","type":"resource_group_id"},"template":{"services_total":3,"name":"Continuous Delivery Toolchain","source":"zip","type":"template"},"creator":"IBMid-550001DFUN","created":"2019-03-08T12:56:39.348Z","region_id":"ibm:yp:us-south","description":"jaskon2000","generator":"otc_setup","services":[{"container":{"guid":"6f4d370f77a647e693d77ec638a44dc8","type":"resource_group_id"},"toolchain_binding":{"webhook_id":"dd262d45b08d7675c465723d304d2bae","name":"build","status":{"state":"configured"}},"broker_id":"12345678-9123-4567-8912-345678012pipeline","region_id":"ibm:yp:us-south","description":"Automate your builds, deployments, and more.","url":"https:\/\/otc-pipeline-broker.ng.bluemix.net\/pipeline-broker\/api","tags":["ibm","deliver","build","deploy","pipeline"],"instance_id":"b06f1282-ee9b-4ac4-8ae8-27e385b8a2a8","updated_at":"2019-03-08T12:56:40.833Z","service_id":"pipeline","dashboard_url":"\/devops\/pipelines\/b06f1282-ee9b-4ac4-8ae8-27e385b8a2a8","parameters":{"ui_pipeline":true,"ui-pipeline":true,"configuration":{"env":{"REGION_ID":"ibm:yp:us-south","CF_DOMAIN":"mybluemix.net","API_KEY":"SXPIBTJUNzG22qL715fUJrQZaNwMWJIkOsW6sE5dU4XQ","CF_HOSTNAME":"jaskon2000","REPO":"repo","CF_ORGANIZATION":"jaskonhuang@qq.com","CF_SPACE":"dev","CF_APP":"jaskon2000"},"execute":true,"content":"---\nstages:\n- name: Build Stage\n  inputs:\n  - type: git\n    branch: master\n    service: ${REPO}\n  properties:\n  - name: CF_HOSTNAME\n    value: \"${CF_HOSTNAME}\"\n    type: text\n  - name: CF_DOMAIN\n    value: \"${CF_DOMAIN}\"\n    type: text\n  triggers:\n  - type: commit\n  jobs:\n  - name: Build\n    type: builder\n    artifact_dir: ''\n    build_type: shell\n    script: |-\n      #!\/bin\/bash\n      if  [[ -f post_build.sh ]]; then\n        chmod +x post_build.sh;\n        echo \"executing the post_build script\";\n        sh post_build.sh;\n      else\n        echo \"the post_build script does not exist\";\n      fi\n- name: Deploy Stage\n  inputs:\n  - type: job\n    stage: Build Stage\n    job: Build\n  properties:\n  - name: CF_HOSTNAME\n    value: \"${CF_HOSTNAME}\"\n    type: text\n  - name: CF_DOMAIN\n    value: \"${CF_DOMAIN}\"\n    type: text\n  triggers:\n  - type: stage\n  jobs:\n  - name: Deploy\n    type: deployer\n    target:\n      region_id: ${REGION_ID}\n      organization: ${CF_ORGANIZATION}\n      space: ${CF_SPACE}\n      application: ${CF_APP}\n      api_key: ${API_KEY}\n    script: |-\n      #!\/bin\/bash\n      cf push \"${CF_APP}\" --hostname \"${CF_HOSTNAME}\" -d \"${CF_DOMAIN}\"\n      # cf logs \"${CF_APP}\" --recent\n- name: Health Stage\n  inputs:\n  - type: job\n    stage: Build Stage\n    job: Build\n  triggers:\n  - type: stage\n  permission:\n    execute: TOOLCHAIN_ADMINS\n  properties:\n  - name: CF_HOSTNAME\n    value: \"${CF_HOSTNAME}\"\n    type: text\n  - name: CF_DOMAIN\n    value: \"${CF_DOMAIN}\"\n    type: text\n  jobs:\n  - name: Test\n    type: tester\n    script: |-\n      #!\/bin\/sh\n      apk add --no-cache curl\n      if [ \"$(curl -is http:\/\/jaskon2000.mybluemix.net\/health  --connect-timeout 3 --max-time 5 --retry 3 --retry-max-time 30 | head -n 1 | grep 200)\" != \"\" ]; then\n        echo \"Successfully reached health endpoint\"\n        echo \"=====================================================================\"\n      else\n        echo \"Could not reach health endpoint: http:\/\/jaskon2000.mybluemix.net\/health\"\n        exit 1;\n      fi;\n    test_type: customimage\n    docker_image: alpine\n"},"api_url":"http:\/\/pipeline-service\/pipeline\/pipelines\/b06f1282-ee9b-4ac4-8ae8-27e385b8a2a8","name":"jaskon2000","services":["repo"],"label":"jaskon2000","external_api_url":"https:\/\/pipeline-service.us-south.devops.cloud.ibm.com\/pipeline\/pipelines\/b06f1282-ee9b-4ac4-8ae8-27e385b8a2a8"},"status":{"state":"configured"}},{"container":{"guid":"6f4d370f77a647e693d77ec638a44dc8","type":"resource_group_id"},"toolchain_binding":{"webhook_id":"2d59ce43b03419671f5b77684cae1950","name":"repo","status":{"state":"configured"}},"broker_id":"12345678-9123-4567-8912-345678012hostedgit","region_id":"ibm:yp:us-south","description":"IBM hosted repos and issue tracking based on GitLab Community Edition.","url":"https:\/\/otc-hosted-git-broker.ng.bluemix.net\/github-broker\/api","tags":["ibm","code","collaboration","scm"],"instance_id":"a68d5103-4252-4c24-abc1-f2f4dde981cb","updated_at":"2019-03-08T12:56:50.167Z","service_id":"hostedgit","dashboard_url":"https:\/\/git.ng.bluemix.net\/jaskonhuang\/jaskon2000","parameters":{"repo_url":"https:\/\/git.ng.bluemix.net\/jaskonhuang\/jaskon2000.git","api_root_url":"https:\/\/git.ng.bluemix.net\/api","owner_id":"jaskonhuang","private_repo":true,"git_id":"hostedgit","label":"jaskon2000","type":"link","has_issues":true,"source_repo_url":"","enable_traceability":true,"namespace_table":"","repo_name":"jaskon2000","extra_capabilities":[{"capability_id":"git.issues","label":"jaskon2000","display_name":"Issues","dashboard_url":"https:\/\/git.ng.bluemix.net\/jaskonhuang\/jaskon2000\/issues","enabled":true,"tags":["think","code"]}],"token_url":"https:\/\/otc-github-consolidated-broker.us-south.devops.cloud.ibm.com\/github\/token?git_id=hostedgit"},"status":{"state":"configured"}},{"container":{"guid":"6f4d370f77a647e693d77ec638a44dc8","type":"resource_group_id"},"toolchain_binding":{"name":"webide","status":{"state":"configured"}},"broker_id":"92d3a2f2-e71a-491c-9f50-a1dfc30orion","region_id":"ibm:yp:us-south","description":"A browser-based IDE for web and cloud development.","url":"https:\/\/otc-orion-broker.ng.bluemix.net\/orion-broker\/api","tags":["ibm","code","ide","edit"],"instance_id":"5d2c58ea-722d-4e85-818f-0d8579c868d3","updated_at":"2019-03-08T12:56:40.450Z","service_id":"orion","dashboard_url":"\/devops\/code\/edit\/edit.html#,toolchain=6966b335-4e2d-4174-9162-1bb0b48aefa5","parameters":{"container_url":"","dashboard_url":"\/devops\/code\/edit\/edit.html#,toolchain=6966b335-4e2d-4174-9162-1bb0b48aefa5","toolchain_id":"6966b335-4e2d-4174-9162-1bb0b48aefa5"},"status":{"state":"configured"}}],"tags":[],"updated_at":"2019-03-08T12:56:39.348Z","lifecycle_messaging_webhook_id":"23b6f276e4aad65be7adbd882da225e6","name":"jaskon2000","toolchain_guid":"6966b335-4e2d-4174-9162-1bb0b48aefa5","key":"jaskon2000_6f4d370f77a647e693d77ec638a44dc8_ibm:yp:us-south","crn":"crn:v1:bluemix:public:toolchain:us-south:a\/db1a97f4ad1643c5816d63293253b4c2:6966b335-4e2d-4174-9162-1bb0b48aefa5::"}
